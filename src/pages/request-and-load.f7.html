<template>
  <div class="page">
    <div class="navbar">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
        <div class="left">
          <a href="#" class="back link">
            <i class="icon icon-back"></i>
            <span class="if-not-md">Back</span>
          </a>
        </div>
        <div class="title">${userTitle()}</div>
      </div>
    </div>
    <div class="page-content">
      <div class="block block-strong no-hairlines no-margin">
     
        <div class="row">
        <img class="profilPic col-25" src="${user.profile_pic_url}"/>

        <div class="aboInfo col-25">
          <p>${user.edge_owner_to_timeline_media.count}</p>
          <p>Posts</p>
        </div>

        <div class="aboInfo col-25">
          <p>${user.edge_followed_by.count}</p>
          <p>Subscribers</p>
        </div>

        <div class="aboInfo col-25">
          <p>${user.edge_follow.count}</p>
          <p>Subscribed</p>
        </div>
      </div>
      </div>
      <div class="block block-strong no-hairlines no-margin padding-top-half">
        <p>${user.biography}</p>
        ${userURL()}
      </div>
      <div class="row no-gap">${userPosts()}</div>
    </div>
  </div>
</template>
<script>
  import './../css/pages/userPage.css'
  export default (props) => {
    const user = props.user.graphql.user;

    const userTitle = function(){
      if (user.full_name != "") {
        return user.full_name;
      }
      return user.username; 
    }

    const userURL = function(){
      if (user.external_url != null) {
        return <a class="link external" href={user.external_url}>{user.external_url}</a>;
      }
    }

    const userPosts = function(){
      let postArray = user.edge_owner_to_timeline_media.edges;
      let outputArray = [];
      for (let i = 0; i < postArray.length; i++) {
        let post = <img class="col-33 mediaPost" src={postArray[i].node.display_url}/>;
        outputArray.push(post);

      }
      return outputArray
    }

    return $render;
  }
</script>
